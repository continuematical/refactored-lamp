{"ast":null,"code":"import { clamp, get, size } from '@antv/util';\nimport { RANGE_VALUE, RANGE_TYPE, PERCENT } from './constants';\n/**\n * 将 range 生成为 data 数据\n * @param range\n * @param key\n * @returns {GaugeRangeData}\n */\nexport function processRangeData(range, percent) {\n  return range\n  // 映射为 stack 的数据\n  .map(function (r, idx) {\n    var _a;\n    return _a = {}, _a[RANGE_VALUE] = r - (range[idx - 1] || 0), _a[RANGE_TYPE] = \"\" + idx, _a[PERCENT] = percent, _a;\n  })\n  // 去掉 0 的数据\n  .filter(function (d) {\n    return !!d[RANGE_VALUE];\n  });\n}\n/**\n * 获取 仪表盘 指针数据\n * @param percent\n */\nexport function getIndicatorData(percent) {\n  var _a;\n  return [(_a = {}, _a[PERCENT] = clamp(percent, 0, 1), _a)];\n}\n/**\n * 获取仪表盘 表盘弧形数据\n * @param percent\n * @param range\n */\nexport function getRangeData(percent, range) {\n  var ticks = get(range, ['ticks'], []);\n  var clampTicks = size(ticks) ? ticks : [0, clamp(percent, 0, 1), 1];\n  return processRangeData(clampTicks, percent);\n}","map":{"version":3,"names":["clamp","get","size","RANGE_VALUE","RANGE_TYPE","PERCENT","processRangeData","range","percent","map","r","idx","_a","filter","d","getIndicatorData","getRangeData","ticks","clampTicks"],"sources":["../../../src/plots/gauge/utils.ts"],"sourcesContent":["import { clamp, get, size } from '@antv/util';\nimport { Data, Datum } from '../../types';\nimport { RANGE_VALUE, RANGE_TYPE, PERCENT } from './constants';\nimport { GaugeOptions, GaugeRangeData } from './types';\n\n/**\n * 将 range 生成为 data 数据\n * @param range\n * @param key\n * @returns {GaugeRangeData}\n */\nexport function processRangeData(range: number[], percent: GaugeOptions['percent']): GaugeRangeData {\n  return (\n    range\n      // 映射为 stack 的数据\n      .map((r: number, idx: number) => {\n        return { [RANGE_VALUE]: r - (range[idx - 1] || 0), [RANGE_TYPE]: `${idx}`, [PERCENT]: percent };\n      })\n      // 去掉 0 的数据\n      .filter((d: Datum) => !!d[RANGE_VALUE])\n  );\n}\n\n/**\n * 获取 仪表盘 指针数据\n * @param percent\n */\nexport function getIndicatorData(percent: GaugeOptions['percent']): Data {\n  return [{ [PERCENT]: clamp(percent, 0, 1) }];\n}\n\n/**\n * 获取仪表盘 表盘弧形数据\n * @param percent\n * @param range\n */\nexport function getRangeData(percent: GaugeOptions['percent'], range?: GaugeOptions['range']): GaugeRangeData {\n  const ticks = get(range, ['ticks'], []);\n\n  const clampTicks = size(ticks) ? ticks : [0, clamp(percent, 0, 1), 1];\n  return processRangeData(clampTicks as number[], percent);\n}\n"],"mappings":"AAAA,SAASA,KAAK,EAAEC,GAAG,EAAEC,IAAI,QAAQ,YAAY;AAE7C,SAASC,WAAW,EAAEC,UAAU,EAAEC,OAAO,QAAQ,aAAa;AAG9D;;;;;;AAMA,OAAM,SAAUC,gBAAgBA,CAACC,KAAe,EAAEC,OAAgC;EAChF,OACED;EACE;EAAA,CACCE,GAAG,CAAC,UAACC,CAAS,EAAEC,GAAW;;IAC1B,OAAAC,EAAA,OAASA,EAAA,CAACT,WAAW,IAAGO,CAAC,IAAIH,KAAK,CAACI,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAEC,EAAA,CAACR,UAAU,IAAG,KAAGO,GAAK,EAAEC,EAAA,CAACP,OAAO,IAAGG,OAAO,EAAAI,EAAA;EAC/F,CAAC;EACD;EAAA,CACCC,MAAM,CAAC,UAACC,CAAQ;IAAK,QAAC,CAACA,CAAC,CAACX,WAAW,CAAC;EAAhB,CAAgB,CAAC;AAE7C;AAEA;;;;AAIA,OAAM,SAAUY,gBAAgBA,CAACP,OAAgC;;EAC/D,OAAO,EAAAI,EAAA,OAAGA,EAAA,CAACP,OAAO,IAAGL,KAAK,CAACQ,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC,EAAAI,EAAA,EAAG;AAC9C;AAEA;;;;;AAKA,OAAM,SAAUI,YAAYA,CAACR,OAAgC,EAAED,KAA6B;EAC1F,IAAMU,KAAK,GAAGhB,GAAG,CAACM,KAAK,EAAE,CAAC,OAAO,CAAC,EAAE,EAAE,CAAC;EAEvC,IAAMW,UAAU,GAAGhB,IAAI,CAACe,KAAK,CAAC,GAAGA,KAAK,GAAG,CAAC,CAAC,EAAEjB,KAAK,CAACQ,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;EACrE,OAAOF,gBAAgB,CAACY,UAAsB,EAAEV,OAAO,CAAC;AAC1D","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}