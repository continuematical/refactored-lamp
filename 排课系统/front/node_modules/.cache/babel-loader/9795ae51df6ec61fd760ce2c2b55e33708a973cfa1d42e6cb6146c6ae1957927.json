{"ast":null,"code":"import { __assign, __rest } from \"tslib\";\nimport { isNumber } from '@antv/util';\nimport { flow, deepAssign, pick } from '../../utils';\nimport { point } from '../../adaptor/geometries';\nimport { brushInteraction } from '../../adaptor/brush';\nimport { interaction, animation, theme, scale, annotation, slider, scrollbar } from '../../adaptor/common';\nimport { findGeometry, transformLabel } from '../../utils';\nimport { getQuadrantDefaultConfig, getPath, getMeta } from './util';\n/**\n * 散点图默认美观\n * ① data.length === 1 ② 所有数据 y 值相等 ③ 所有数据 x 值相等\n * @param params\n * @returns params\n */\nexport function transformOptions(options) {\n  var _a = options.data,\n    data = _a === void 0 ? [] : _a,\n    xField = options.xField,\n    yField = options.yField;\n  if (data.length) {\n    // x y 字段知否只有一个值，如果只有一个值，则进行优化\n    var isOneX = true;\n    var isOneY = true;\n    var prev = data[0];\n    var curr = void 0;\n    for (var i = 1; i < data.length; i++) {\n      curr = data[i];\n      if (prev[xField] !== curr[xField]) {\n        isOneX = false;\n      }\n      if (prev[yField] !== curr[yField]) {\n        isOneY = false;\n      }\n      // 如果都不是 oneValue，那么可提前跳出循环\n      if (!isOneX && !isOneY) {\n        break;\n      }\n      prev = curr;\n    }\n    var keys = [];\n    isOneX && keys.push(xField);\n    isOneY && keys.push(yField);\n    var meta_1 = pick(getMeta(options), keys);\n    return deepAssign({}, options, {\n      meta: meta_1\n    });\n  }\n  return options;\n}\n/**\n * 字段\n * @param params\n */\nfunction geometry(params) {\n  var chart = params.chart,\n    options = params.options;\n  var data = options.data,\n    type = options.type,\n    color = options.color,\n    shape = options.shape,\n    pointStyle = options.pointStyle,\n    shapeField = options.shapeField,\n    colorField = options.colorField,\n    xField = options.xField,\n    yField = options.yField,\n    sizeField = options.sizeField;\n  var size = options.size;\n  var tooltip = options.tooltip;\n  if (sizeField) {\n    if (!size) {\n      size = [2, 8];\n    }\n    if (isNumber(size)) {\n      size = [size, size];\n    }\n  }\n  if (tooltip && !tooltip.fields) {\n    tooltip = __assign(__assign({}, tooltip), {\n      fields: [xField, yField, colorField, sizeField, shapeField]\n    });\n  }\n  // 数据\n  chart.data(data);\n  // geometry\n  point(deepAssign({}, params, {\n    options: {\n      seriesField: colorField,\n      point: {\n        color: color,\n        shape: shape,\n        size: size,\n        style: pointStyle\n      },\n      tooltip: tooltip\n    }\n  }));\n  var geometry = findGeometry(chart, 'point');\n  // 数据调整\n  if (type) {\n    geometry.adjust(type);\n  }\n  return params;\n}\n/**\n * meta 配置\n * @param params\n */\nexport function meta(params) {\n  var _a;\n  var options = params.options;\n  var xAxis = options.xAxis,\n    yAxis = options.yAxis,\n    xField = options.xField,\n    yField = options.yField;\n  var newOptions = transformOptions(options);\n  return flow(scale((_a = {}, _a[xField] = xAxis, _a[yField] = yAxis, _a)))(deepAssign({}, params, {\n    options: newOptions\n  }));\n}\n/**\n * axis 配置\n * @param params\n */\nfunction axis(params) {\n  var chart = params.chart,\n    options = params.options;\n  var xAxis = options.xAxis,\n    yAxis = options.yAxis,\n    xField = options.xField,\n    yField = options.yField;\n  chart.axis(xField, xAxis);\n  chart.axis(yField, yAxis);\n  return params;\n}\n/**\n * legend 配置\n * @param params\n */\nfunction legend(params) {\n  var chart = params.chart,\n    options = params.options;\n  var legend = options.legend,\n    colorField = options.colorField,\n    shapeField = options.shapeField,\n    sizeField = options.sizeField,\n    shapeLegend = options.shapeLegend,\n    sizeLegend = options.sizeLegend;\n  /** legend 不为 false, 则展示图例, 优先展示 color 分类图例 */\n  var showLegend = legend !== false;\n  if (colorField) {\n    chart.legend(colorField, showLegend ? legend : false);\n  }\n  // 优先取 shapeLegend, 否则取 legend\n  if (shapeField) {\n    if (shapeLegend) {\n      chart.legend(shapeField, shapeLegend);\n    } else {\n      chart.legend(shapeField, shapeLegend === false ? false : legend);\n    }\n  }\n  if (sizeField) {\n    chart.legend(sizeField, sizeLegend ? sizeLegend : false);\n  }\n  /** 默认不展示 shape 图例，当 shapeLegend 为 undefined 也不展示图例 */\n  /** 默认没有 sizeField，则隐藏连续图例 */\n  if (!showLegend && !shapeLegend && !sizeLegend) {\n    chart.legend(false);\n  }\n  return params;\n}\n/**\n * 数据标签\n * @param params\n */\nfunction label(params) {\n  var chart = params.chart,\n    options = params.options;\n  var label = options.label,\n    yField = options.yField;\n  var scatterGeometry = findGeometry(chart, 'point');\n  // label 为 false, 空 则不显示 label\n  if (!label) {\n    scatterGeometry.label(false);\n  } else {\n    var callback = label.callback,\n      cfg = __rest(label, [\"callback\"]);\n    scatterGeometry.label({\n      fields: [yField],\n      callback: callback,\n      cfg: transformLabel(cfg)\n    });\n  }\n  return params;\n}\n/**\n * annotation 配置\n * - 特殊 annotation: quadrant(四象限)\n * @param params\n */\nfunction scatterAnnotation(params) {\n  var options = params.options;\n  var quadrant = options.quadrant;\n  var annotationOptions = [];\n  if (quadrant) {\n    var _a = quadrant.xBaseline,\n      xBaseline = _a === void 0 ? 0 : _a,\n      _b = quadrant.yBaseline,\n      yBaseline = _b === void 0 ? 0 : _b,\n      labels_1 = quadrant.labels,\n      regionStyle_1 = quadrant.regionStyle,\n      lineStyle = quadrant.lineStyle;\n    var defaultConfig_1 = getQuadrantDefaultConfig(xBaseline, yBaseline);\n    // 仅支持四象限\n    var quadrants = new Array(4).join(',').split(',');\n    quadrants.forEach(function (_, index) {\n      annotationOptions.push(__assign(__assign({\n        type: 'region',\n        top: false\n      }, defaultConfig_1.regionStyle[index].position), {\n        style: deepAssign({}, defaultConfig_1.regionStyle[index].style, regionStyle_1 === null || regionStyle_1 === void 0 ? void 0 : regionStyle_1[index])\n      }), __assign({\n        type: 'text',\n        top: true\n      }, deepAssign({}, defaultConfig_1.labelStyle[index], labels_1 === null || labels_1 === void 0 ? void 0 : labels_1[index])));\n    });\n    // 生成坐标轴\n    annotationOptions.push({\n      type: 'line',\n      top: false,\n      start: ['min', yBaseline],\n      end: ['max', yBaseline],\n      style: deepAssign({}, defaultConfig_1.lineStyle, lineStyle)\n    }, {\n      type: 'line',\n      top: false,\n      start: [xBaseline, 'min'],\n      end: [xBaseline, 'max'],\n      style: deepAssign({}, defaultConfig_1.lineStyle, lineStyle)\n    });\n  }\n  return flow(annotation(annotationOptions))(params);\n}\n// 趋势线\nfunction regressionLine(params) {\n  var options = params.options,\n    chart = params.chart;\n  var regressionLine = options.regressionLine;\n  if (regressionLine) {\n    var style_1 = regressionLine.style,\n      _a = regressionLine.top,\n      top_1 = _a === void 0 ? false : _a;\n    var defaultStyle_1 = {\n      stroke: '#9ba29a',\n      lineWidth: 2,\n      opacity: 0.5\n    };\n    chart.annotation().shape({\n      top: top_1,\n      render: function (container, view) {\n        var group = container.addGroup({\n          id: chart.id + \"-regression-line\",\n          name: 'regression-line-group'\n        });\n        var path = getPath({\n          view: view,\n          options: options\n        });\n        group.addShape('path', {\n          name: 'regression-line',\n          attrs: __assign(__assign({\n            path: path\n          }, defaultStyle_1), style_1)\n        });\n      }\n    });\n  }\n  return params;\n}\n/**\n * tooltip 配置\n * @param params\n */\nexport function tooltip(params) {\n  var chart = params.chart,\n    options = params.options;\n  var tooltip = options.tooltip;\n  if (tooltip) {\n    chart.tooltip(tooltip);\n  } else if (tooltip === false) {\n    chart.tooltip(false);\n  }\n  return params;\n}\n/**\n * 散点图适配器\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n  // flow 的方式处理所有的配置到 G2 API\n  return flow(geometry, meta, axis, legend, tooltip, label,\n  // 需要在 interaction 前面\n  brushInteraction, slider, scrollbar, interaction, scatterAnnotation, animation, theme, regressionLine)(params);\n}","map":{"version":3,"names":["isNumber","flow","deepAssign","pick","point","brushInteraction","interaction","animation","theme","scale","annotation","slider","scrollbar","findGeometry","transformLabel","getQuadrantDefaultConfig","getPath","getMeta","transformOptions","options","_a","data","xField","yField","length","isOneX","isOneY","prev","curr","i","keys","push","meta_1","meta","geometry","params","chart","type","color","shape","pointStyle","shapeField","colorField","sizeField","size","tooltip","fields","__assign","seriesField","style","adjust","xAxis","yAxis","newOptions","axis","legend","shapeLegend","sizeLegend","showLegend","label","scatterGeometry","callback","cfg","__rest","scatterAnnotation","quadrant","annotationOptions","xBaseline","_b","yBaseline","labels_1","labels","regionStyle_1","regionStyle","lineStyle","defaultConfig_1","quadrants","Array","join","split","forEach","_","index","top","position","labelStyle","start","end","regressionLine","style_1","top_1","defaultStyle_1","stroke","lineWidth","opacity","render","container","view","group","addGroup","id","name","path","addShape","attrs","adaptor"],"sources":["../../../src/plots/scatter/adaptor.ts"],"sourcesContent":["import { isNumber } from '@antv/util';\nimport { Params } from '../../core/adaptor';\nimport { flow, deepAssign, pick } from '../../utils';\nimport { point } from '../../adaptor/geometries';\nimport { brushInteraction } from '../../adaptor/brush';\nimport { interaction, animation, theme, scale, annotation, slider, scrollbar } from '../../adaptor/common';\nimport { findGeometry, transformLabel } from '../../utils';\nimport { getQuadrantDefaultConfig, getPath, getMeta } from './util';\nimport { ScatterOptions } from './types';\n\n/**\n * 散点图默认美观\n * ① data.length === 1 ② 所有数据 y 值相等 ③ 所有数据 x 值相等\n * @param params\n * @returns params\n */\nexport function transformOptions(options: ScatterOptions): ScatterOptions {\n  const { data = [], xField, yField } = options;\n\n  if (data.length) {\n    // x y 字段知否只有一个值，如果只有一个值，则进行优化\n    let isOneX = true;\n    let isOneY = true;\n\n    let prev = data[0];\n    let curr;\n\n    for (let i = 1; i < data.length; i++) {\n      curr = data[i];\n\n      if (prev[xField] !== curr[xField]) {\n        isOneX = false;\n      }\n\n      if (prev[yField] !== curr[yField]) {\n        isOneY = false;\n      }\n\n      // 如果都不是 oneValue，那么可提前跳出循环\n      if (!isOneX && !isOneY) {\n        break;\n      }\n\n      prev = curr;\n    }\n\n    const keys = [];\n    isOneX && keys.push(xField);\n    isOneY && keys.push(yField);\n\n    const meta = pick(getMeta(options), keys);\n\n    return deepAssign({}, options, { meta });\n  }\n\n  return options;\n}\n\n/**\n * 字段\n * @param params\n */\nfunction geometry(params: Params<ScatterOptions>): Params<ScatterOptions> {\n  const { chart, options } = params;\n  const { data, type, color, shape, pointStyle, shapeField, colorField, xField, yField, sizeField } = options;\n  let { size } = options;\n\n  let { tooltip } = options;\n\n  if (sizeField) {\n    if (!size) {\n      size = [2, 8];\n    }\n    if (isNumber(size)) {\n      size = [size, size];\n    }\n  }\n\n  if (tooltip && !tooltip.fields) {\n    tooltip = {\n      ...tooltip,\n      fields: [xField, yField, colorField, sizeField, shapeField],\n    };\n  }\n  // 数据\n  chart.data(data);\n\n  // geometry\n  point(\n    deepAssign({}, params, {\n      options: {\n        seriesField: colorField,\n        point: {\n          color,\n          shape,\n          size,\n          style: pointStyle,\n        },\n        tooltip,\n      },\n    })\n  );\n\n  const geometry = findGeometry(chart, 'point');\n\n  // 数据调整\n  if (type) {\n    geometry.adjust(type);\n  }\n\n  return params;\n}\n\n/**\n * meta 配置\n * @param params\n */\nexport function meta(params: Params<ScatterOptions>): Params<ScatterOptions> {\n  const { options } = params;\n  const { xAxis, yAxis, xField, yField } = options;\n\n  const newOptions = transformOptions(options);\n  return flow(\n    scale({\n      [xField]: xAxis,\n      [yField]: yAxis,\n    })\n  )(deepAssign({}, params, { options: newOptions }));\n}\n\n/**\n * axis 配置\n * @param params\n */\nfunction axis(params: Params<ScatterOptions>): Params<ScatterOptions> {\n  const { chart, options } = params;\n  const { xAxis, yAxis, xField, yField } = options;\n\n  chart.axis(xField, xAxis);\n  chart.axis(yField, yAxis);\n\n  return params;\n}\n\n/**\n * legend 配置\n * @param params\n */\nfunction legend(params: Params<ScatterOptions>): Params<ScatterOptions> {\n  const { chart, options } = params;\n  const { legend, colorField, shapeField, sizeField, shapeLegend, sizeLegend } = options;\n\n  /** legend 不为 false, 则展示图例, 优先展示 color 分类图例 */\n  const showLegend = legend !== false;\n\n  if (colorField) {\n    chart.legend(colorField, showLegend ? legend : false);\n  }\n\n  // 优先取 shapeLegend, 否则取 legend\n  if (shapeField) {\n    if (shapeLegend) {\n      chart.legend(shapeField, shapeLegend);\n    } else {\n      chart.legend(shapeField, shapeLegend === false ? false : legend);\n    }\n  }\n\n  if (sizeField) {\n    chart.legend(sizeField, sizeLegend ? sizeLegend : false);\n  }\n\n  /** 默认不展示 shape 图例，当 shapeLegend 为 undefined 也不展示图例 */\n  /** 默认没有 sizeField，则隐藏连续图例 */\n  if (!showLegend && !shapeLegend && !sizeLegend) {\n    chart.legend(false);\n  }\n\n  return params;\n}\n\n/**\n * 数据标签\n * @param params\n */\nfunction label(params: Params<ScatterOptions>): Params<ScatterOptions> {\n  const { chart, options } = params;\n  const { label, yField } = options;\n\n  const scatterGeometry = findGeometry(chart, 'point');\n\n  // label 为 false, 空 则不显示 label\n  if (!label) {\n    scatterGeometry.label(false);\n  } else {\n    const { callback, ...cfg } = label;\n    scatterGeometry.label({\n      fields: [yField],\n      callback,\n      cfg: transformLabel(cfg),\n    });\n  }\n\n  return params;\n}\n\n/**\n * annotation 配置\n * - 特殊 annotation: quadrant(四象限)\n * @param params\n */\nfunction scatterAnnotation(params: Params<ScatterOptions>): Params<ScatterOptions> {\n  const { options } = params;\n  const { quadrant } = options;\n\n  const annotationOptions = [];\n\n  if (quadrant) {\n    const { xBaseline = 0, yBaseline = 0, labels, regionStyle, lineStyle } = quadrant;\n    const defaultConfig = getQuadrantDefaultConfig(xBaseline, yBaseline);\n    // 仅支持四象限\n    const quadrants = new Array(4).join(',').split(',');\n    quadrants.forEach((_: string, index: number) => {\n      annotationOptions.push(\n        {\n          type: 'region',\n          top: false,\n          ...defaultConfig.regionStyle[index].position,\n          style: deepAssign({}, defaultConfig.regionStyle[index].style, regionStyle?.[index]),\n        },\n        {\n          type: 'text',\n          top: true,\n          ...deepAssign({}, defaultConfig.labelStyle[index], labels?.[index]),\n        }\n      );\n    });\n    // 生成坐标轴\n    annotationOptions.push(\n      {\n        type: 'line',\n        top: false,\n        start: ['min', yBaseline],\n        end: ['max', yBaseline],\n        style: deepAssign({}, defaultConfig.lineStyle, lineStyle),\n      },\n      {\n        type: 'line',\n        top: false,\n        start: [xBaseline, 'min'],\n        end: [xBaseline, 'max'],\n        style: deepAssign({}, defaultConfig.lineStyle, lineStyle),\n      }\n    );\n  }\n\n  return flow(annotation(annotationOptions))(params);\n}\n\n// 趋势线\nfunction regressionLine(params: Params<ScatterOptions>): Params<ScatterOptions> {\n  const { options, chart } = params;\n  const { regressionLine } = options;\n  if (regressionLine) {\n    const { style, top = false } = regressionLine;\n    const defaultStyle = {\n      stroke: '#9ba29a',\n      lineWidth: 2,\n      opacity: 0.5,\n    };\n    chart.annotation().shape({\n      top,\n      render: (container, view) => {\n        const group = container.addGroup({\n          id: `${chart.id}-regression-line`,\n          name: 'regression-line-group',\n        });\n        const path = getPath({\n          view,\n          options,\n        });\n        group.addShape('path', {\n          name: 'regression-line',\n          attrs: {\n            path,\n            ...defaultStyle,\n            ...style,\n          },\n        });\n      },\n    });\n  }\n\n  return params;\n}\n\n/**\n * tooltip 配置\n * @param params\n */\nexport function tooltip(params: Params<ScatterOptions>): Params<ScatterOptions> {\n  const { chart, options } = params;\n  const { tooltip } = options;\n\n  if (tooltip) {\n    chart.tooltip(tooltip);\n  } else if (tooltip === false) {\n    chart.tooltip(false);\n  }\n\n  return params;\n}\n\n/**\n * 散点图适配器\n * @param chart\n * @param options\n */\nexport function adaptor(params: Params<ScatterOptions>) {\n  // flow 的方式处理所有的配置到 G2 API\n  return flow(\n    geometry,\n    meta,\n    axis,\n    legend,\n    tooltip,\n    label,\n    // 需要在 interaction 前面\n    brushInteraction,\n    slider,\n    scrollbar,\n    interaction,\n    scatterAnnotation,\n    animation,\n    theme,\n    regressionLine\n  )(params);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}