{"ast":null,"code":"import { isString } from '@antv/util';\nimport { flow, deepAssign } from '../../utils';\nimport { scale, animation, theme, annotation } from '../../adaptor/common';\nimport { interval } from '../../adaptor/geometries';\nimport { DEFAULT_COLOR } from './constants';\nimport { getProgressData } from './utils';\n/**\n * 字段\n * @param params\n */\nexport function geometry(params) {\n  var chart = params.chart,\n    options = params.options;\n  var percent = options.percent,\n    progressStyle = options.progressStyle,\n    color = options.color,\n    barWidthRatio = options.barWidthRatio;\n  chart.data(getProgressData(percent));\n  var p = deepAssign({}, params, {\n    options: {\n      xField: '1',\n      yField: 'percent',\n      seriesField: 'type',\n      isStack: true,\n      widthRatio: barWidthRatio,\n      interval: {\n        style: progressStyle,\n        color: isString(color) ? [color, DEFAULT_COLOR[1]] : color\n      },\n      args: {\n        zIndexReversed: true,\n        sortZIndex: true\n      }\n    }\n  });\n  interval(p);\n  // 关闭组件\n  chart.tooltip(false);\n  chart.axis(false);\n  chart.legend(false);\n  return params;\n}\n/**\n * other 配置\n * @param params\n */\nfunction coordinate(params) {\n  var chart = params.chart;\n  chart.coordinate('rect').transpose();\n  return params;\n}\n/**\n * 进度图适配器\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n  // @ts-ignore\n  return flow(geometry, scale({}), coordinate, animation, theme, annotation())(params);\n}","map":{"version":3,"names":["isString","flow","deepAssign","scale","animation","theme","annotation","interval","DEFAULT_COLOR","getProgressData","geometry","params","chart","options","percent","progressStyle","color","barWidthRatio","data","p","xField","yField","seriesField","isStack","widthRatio","style","args","zIndexReversed","sortZIndex","tooltip","axis","legend","coordinate","transpose","adaptor"],"sources":["../../../src/plots/progress/adaptor.ts"],"sourcesContent":["import { isString } from '@antv/util';\nimport { Params } from '../../core/adaptor';\nimport { flow, deepAssign } from '../../utils';\nimport { scale, animation, theme, annotation } from '../../adaptor/common';\nimport { interval } from '../../adaptor/geometries';\nimport { ProgressOptions } from './types';\nimport { DEFAULT_COLOR } from './constants';\nimport { getProgressData } from './utils';\n\n/**\n * 字段\n * @param params\n */\nexport function geometry(params: Params<ProgressOptions>): Params<ProgressOptions> {\n  const { chart, options } = params;\n  const { percent, progressStyle, color, barWidthRatio } = options;\n\n  chart.data(getProgressData(percent));\n\n  const p = deepAssign({}, params, {\n    options: {\n      xField: '1',\n      yField: 'percent',\n      seriesField: 'type',\n      isStack: true,\n      widthRatio: barWidthRatio,\n      interval: {\n        style: progressStyle,\n        color: isString(color) ? [color, DEFAULT_COLOR[1]] : color,\n      },\n      args: {\n        zIndexReversed: true,\n        sortZIndex: true,\n      },\n    },\n  });\n\n  interval(p);\n\n  // 关闭组件\n  chart.tooltip(false);\n  chart.axis(false);\n  chart.legend(false);\n\n  return params;\n}\n\n/**\n * other 配置\n * @param params\n */\nfunction coordinate(params: Params<ProgressOptions>): Params<ProgressOptions> {\n  const { chart } = params;\n\n  chart.coordinate('rect').transpose();\n\n  return params;\n}\n\n/**\n * 进度图适配器\n * @param chart\n * @param options\n */\nexport function adaptor(params: Params<ProgressOptions>) {\n  // @ts-ignore\n  return flow(geometry, scale({}), coordinate, animation, theme, annotation())(params);\n}\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,YAAY;AAErC,SAASC,IAAI,EAAEC,UAAU,QAAQ,aAAa;AAC9C,SAASC,KAAK,EAAEC,SAAS,EAAEC,KAAK,EAAEC,UAAU,QAAQ,sBAAsB;AAC1E,SAASC,QAAQ,QAAQ,0BAA0B;AAEnD,SAASC,aAAa,QAAQ,aAAa;AAC3C,SAASC,eAAe,QAAQ,SAAS;AAEzC;;;;AAIA,OAAM,SAAUC,QAAQA,CAACC,MAA+B;EAC9C,IAAAC,KAAK,GAAcD,MAAM,CAAAC,KAApB;IAAEC,OAAO,GAAKF,MAAM,CAAAE,OAAX;EACd,IAAAC,OAAO,GAA0CD,OAAO,CAAAC,OAAjD;IAAEC,aAAa,GAA2BF,OAAO,CAAAE,aAAlC;IAAEC,KAAK,GAAoBH,OAAO,CAAAG,KAA3B;IAAEC,aAAa,GAAKJ,OAAO,CAAAI,aAAZ;EAEpDL,KAAK,CAACM,IAAI,CAACT,eAAe,CAACK,OAAO,CAAC,CAAC;EAEpC,IAAMK,CAAC,GAAGjB,UAAU,CAAC,EAAE,EAAES,MAAM,EAAE;IAC/BE,OAAO,EAAE;MACPO,MAAM,EAAE,GAAG;MACXC,MAAM,EAAE,SAAS;MACjBC,WAAW,EAAE,MAAM;MACnBC,OAAO,EAAE,IAAI;MACbC,UAAU,EAAEP,aAAa;MACzBV,QAAQ,EAAE;QACRkB,KAAK,EAAEV,aAAa;QACpBC,KAAK,EAAEhB,QAAQ,CAACgB,KAAK,CAAC,GAAG,CAACA,KAAK,EAAER,aAAa,CAAC,CAAC,CAAC,CAAC,GAAGQ;OACtD;MACDU,IAAI,EAAE;QACJC,cAAc,EAAE,IAAI;QACpBC,UAAU,EAAE;;;GAGjB,CAAC;EAEFrB,QAAQ,CAACY,CAAC,CAAC;EAEX;EACAP,KAAK,CAACiB,OAAO,CAAC,KAAK,CAAC;EACpBjB,KAAK,CAACkB,IAAI,CAAC,KAAK,CAAC;EACjBlB,KAAK,CAACmB,MAAM,CAAC,KAAK,CAAC;EAEnB,OAAOpB,MAAM;AACf;AAEA;;;;AAIA,SAASqB,UAAUA,CAACrB,MAA+B;EACzC,IAAAC,KAAK,GAAKD,MAAM,CAAAC,KAAX;EAEbA,KAAK,CAACoB,UAAU,CAAC,MAAM,CAAC,CAACC,SAAS,EAAE;EAEpC,OAAOtB,MAAM;AACf;AAEA;;;;;AAKA,OAAM,SAAUuB,OAAOA,CAACvB,MAA+B;EACrD;EACA,OAAOV,IAAI,CAACS,QAAQ,EAAEP,KAAK,CAAC,EAAE,CAAC,EAAE6B,UAAU,EAAE5B,SAAS,EAAEC,KAAK,EAAEC,UAAU,EAAE,CAAC,CAACK,MAAM,CAAC;AACtF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}