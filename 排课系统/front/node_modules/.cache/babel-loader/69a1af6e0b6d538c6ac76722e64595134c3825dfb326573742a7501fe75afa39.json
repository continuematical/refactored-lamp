{"ast":null,"code":"import { filter } from '@antv/util';\nimport { getInteractionCfg } from '../interactions/brush';\nimport { deepAssign } from '../utils';\n/** 先引入brush 交互 */\nimport '../interactions/brush';\nvar BRUSH_TYPES = ['brush', 'brush-x', 'brush-y', 'brush-highlight', 'brush-x-highlight', 'brush-y-highlight'];\n/**\n * brush 交互\n */\nexport function brushInteraction(params) {\n  var options = params.options;\n  var brush = options.brush;\n  // 先过滤掉 brush 等交互\n  var interactions = filter(options.interactions || [], function (i) {\n    return BRUSH_TYPES.indexOf(i.type) === -1;\n  });\n  // 设置 brush 交互\n  if (brush === null || brush === void 0 ? void 0 : brush.enabled) {\n    BRUSH_TYPES.forEach(function (type) {\n      var _a;\n      var enable = false;\n      switch (brush.type) {\n        case 'x-rect':\n          enable = type === (brush.action === 'highlight' ? 'brush-x-highlight' : 'brush-x');\n          break;\n        case 'y-rect':\n          enable = type === (brush.action === 'highlight' ? 'brush-y-highlight' : 'brush-y');\n          break;\n        default:\n          enable = type === (brush.action === 'highlight' ? 'brush-highlight' : 'brush');\n          break;\n      }\n      var obj = {\n        type: type,\n        enable: enable\n      };\n      if (((_a = brush.mask) === null || _a === void 0 ? void 0 : _a.style) || brush.type) {\n        obj.cfg = getInteractionCfg(type, brush.type, brush.mask);\n      }\n      interactions.push(obj);\n    });\n    // 塞入 button 配置 (G2Plot 的封装)\n    if ((brush === null || brush === void 0 ? void 0 : brush.action) !== 'highlight') {\n      interactions.push({\n        type: 'filter-action',\n        cfg: {\n          buttonConfig: brush.button\n        }\n      });\n    }\n  }\n  return deepAssign({}, params, {\n    options: {\n      interactions: interactions\n    }\n  });\n}","map":{"version":3,"names":["filter","getInteractionCfg","deepAssign","BRUSH_TYPES","brushInteraction","params","options","brush","interactions","i","indexOf","type","enabled","forEach","enable","action","obj","_a","mask","style","cfg","push","buttonConfig","button"],"sources":["../../src/adaptor/brush.ts"],"sourcesContent":["import { filter } from '@antv/util';\nimport { Params } from '../core/adaptor';\nimport { getInteractionCfg } from '../interactions/brush';\nimport { deepAssign } from '../utils';\nimport { Options as BaseOptions, BrushCfg, Interaction, Writable } from '../types';\n\n/** 先引入brush 交互 */\nimport '../interactions/brush';\n\ntype Options = Pick<BaseOptions, 'interactions'> & { brush?: BrushCfg };\n\nconst BRUSH_TYPES = ['brush', 'brush-x', 'brush-y', 'brush-highlight', 'brush-x-highlight', 'brush-y-highlight'];\n\n/**\n * brush 交互\n */\nexport function brushInteraction<O extends Options = Options>(params: Params<O>): Params<O> {\n  const { options } = params;\n\n  const { brush } = options;\n\n  // 先过滤掉 brush 等交互\n  const interactions = filter(options.interactions || [], (i) => BRUSH_TYPES.indexOf(i.type) === -1);\n\n  // 设置 brush 交互\n  if (brush?.enabled) {\n    BRUSH_TYPES.forEach((type) => {\n      let enable = false;\n      switch (brush.type) {\n        case 'x-rect':\n          enable = type === (brush.action === 'highlight' ? 'brush-x-highlight' : 'brush-x');\n          break;\n        case 'y-rect':\n          enable = type === (brush.action === 'highlight' ? 'brush-y-highlight' : 'brush-y');\n          break;\n        default:\n          enable = type === (brush.action === 'highlight' ? 'brush-highlight' : 'brush');\n          break;\n      }\n      const obj: Writable<Interaction> = { type, enable };\n\n      if (brush.mask?.style || brush.type) {\n        obj.cfg = getInteractionCfg(type, brush.type, brush.mask);\n      }\n      interactions.push(obj);\n    });\n\n    // 塞入 button 配置 (G2Plot 的封装)\n    if (brush?.action !== 'highlight') {\n      interactions.push({\n        type: 'filter-action',\n        cfg: {\n          buttonConfig: brush.button,\n        },\n      });\n    }\n  }\n  return deepAssign({}, params, { options: { interactions } });\n}\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,YAAY;AAEnC,SAASC,iBAAiB,QAAQ,uBAAuB;AACzD,SAASC,UAAU,QAAQ,UAAU;AAGrC;AACA,OAAO,uBAAuB;AAI9B,IAAMC,WAAW,GAAG,CAAC,OAAO,EAAE,SAAS,EAAE,SAAS,EAAE,iBAAiB,EAAE,mBAAmB,EAAE,mBAAmB,CAAC;AAEhH;;;AAGA,OAAM,SAAUC,gBAAgBA,CAA8BC,MAAiB;EACrE,IAAAC,OAAO,GAAKD,MAAM,CAAAC,OAAX;EAEP,IAAAC,KAAK,GAAKD,OAAO,CAAAC,KAAZ;EAEb;EACA,IAAMC,YAAY,GAAGR,MAAM,CAACM,OAAO,CAACE,YAAY,IAAI,EAAE,EAAE,UAACC,CAAC;IAAK,OAAAN,WAAW,CAACO,OAAO,CAACD,CAAC,CAACE,IAAI,CAAC,KAAK,CAAC,CAAC;EAAlC,CAAkC,CAAC;EAElG;EACA,IAAIJ,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEK,OAAO,EAAE;IAClBT,WAAW,CAACU,OAAO,CAAC,UAACF,IAAI;;MACvB,IAAIG,MAAM,GAAG,KAAK;MAClB,QAAQP,KAAK,CAACI,IAAI;QAChB,KAAK,QAAQ;UACXG,MAAM,GAAGH,IAAI,MAAMJ,KAAK,CAACQ,MAAM,KAAK,WAAW,GAAG,mBAAmB,GAAG,SAAS,CAAC;UAClF;QACF,KAAK,QAAQ;UACXD,MAAM,GAAGH,IAAI,MAAMJ,KAAK,CAACQ,MAAM,KAAK,WAAW,GAAG,mBAAmB,GAAG,SAAS,CAAC;UAClF;QACF;UACED,MAAM,GAAGH,IAAI,MAAMJ,KAAK,CAACQ,MAAM,KAAK,WAAW,GAAG,iBAAiB,GAAG,OAAO,CAAC;UAC9E;;MAEJ,IAAMC,GAAG,GAA0B;QAAEL,IAAI,EAAAA,IAAA;QAAEG,MAAM,EAAAA;MAAA,CAAE;MAEnD,IAAI,EAAAG,EAAA,GAAAV,KAAK,CAACW,IAAI,cAAAD,EAAA,uBAAAA,EAAA,CAAEE,KAAK,KAAIZ,KAAK,CAACI,IAAI,EAAE;QACnCK,GAAG,CAACI,GAAG,GAAGnB,iBAAiB,CAACU,IAAI,EAAEJ,KAAK,CAACI,IAAI,EAAEJ,KAAK,CAACW,IAAI,CAAC;;MAE3DV,YAAY,CAACa,IAAI,CAACL,GAAG,CAAC;IACxB,CAAC,CAAC;IAEF;IACA,IAAI,CAAAT,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEQ,MAAM,MAAK,WAAW,EAAE;MACjCP,YAAY,CAACa,IAAI,CAAC;QAChBV,IAAI,EAAE,eAAe;QACrBS,GAAG,EAAE;UACHE,YAAY,EAAEf,KAAK,CAACgB;;OAEvB,CAAC;;;EAGN,OAAOrB,UAAU,CAAC,EAAE,EAAEG,MAAM,EAAE;IAAEC,OAAO,EAAE;MAAEE,YAAY,EAAAA;IAAA;EAAE,CAAE,CAAC;AAC9D","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}